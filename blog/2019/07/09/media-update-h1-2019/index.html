<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Media stack Mid-Year review - Servo, the parallel browser engine</title>
  <meta property="og:title" content="Media stack Mid-Year review - Servo, the parallel browser engine">
  

  <meta name="description" content="Servo is an independent, modular, embeddable web rendering engine written in Rust">
  <meta name="keywords" content="servo, servo engine, servo rendering engine, web engine, web rendering engine, web browser, web browser engine, rust">
  <meta name="author" content="The Servo Project Developers">

  <meta property="og:site_name" content="Servo">
  <meta property="og:type" content="website">
  <meta property="og:image" content="/img/servo-color-positive.png">
  <meta property="og:image:alt" content="Servo logo">
  <meta property="og:logo" content="/img/servo-symbol-color-no-container.png">
  <meta property="og:description" content="Servo is an independent, modular, embeddable web rendering engine written in Rust">
  <meta property="og:url" content="/blog/2019/07/09/media-update-h1-2019/">

  <link rel="stylesheet" href="/css/style.css">
  <link rel="shortcut icon" href="/img/servo-symbol-color-no-container.png">
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  <link rel="alternate" href="/blog/feed.xml" title="Servo Blog" type="application/atom+xml">
</head>

  <body class="is-page">
    <main class="is-main">
      <nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="/img/servo-color-negative-no-container.png" alt="Media stack Mid-Year review">
      </a>

      <a role="button" class="navbar-burger" data-target="navbar-menu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu" id="navbar-menu">
      
        
        
          
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link
            
              
            
          " href="/about/">
              About
            </a>
            <div class="navbar-dropdown">
              
                <a class="navbar-item" href="/governance/">
                  Governance
                </a>
              
            </div>
          </div>
        
      
        
        
          <a class="navbar-item" href="/download/">
            Download
          </a>
        
      
        
        
          
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link
            
              
            
              
            
              
            
          " href="/get-involved/">
              Get Involved
            </a>
            <div class="navbar-dropdown">
              
                <a class="navbar-item" href="/contributing/">
                  Contributing
                </a>
              
                <a class="navbar-item" href="/documentation/">
                  Documentation
                </a>
              
                <a class="navbar-item" href="/coc/">
                  Code of Conduct
                </a>
              
            </div>
          </div>
        
      
        
        
          <a class="navbar-item" href="/sponsorship/">
            Sponsorship
          </a>
        
      
        
        
          <a class="navbar-item" href="/blog/">
            Blog
          </a>
        
      
      <div class="navbar-end">
  
    <div class="navbar-item">
      <a class="button is-github-color" href="https://github.com/servo/servo">
        <span class="icon"><i class="fab fa-github"></i></span>
        <span>GitHub</span>
      </a>
    </div>
  
    <div class="navbar-item">
      <a class="button is-mastodon-color" href="https://floss.social/@servo" rel="me">
        <span class="icon"><i class="fab fa-mastodon"></i></span>
        <span>Mastodon</span>
      </a>
    </div>
  
    <div class="navbar-item">
      <a class="button is-twitter-color" href="https://twitter.com/ServoDev">
        <span class="icon"><i class="fab fa-twitter"></i></span>
        <span>Twitter</span>
      </a>
    </div>
  
</div>

    </div>
  </div>
</nav>

      <section class="section" style="padding-top: 0;">
        <div class="container">
          <aside class="menu box">
            <p class="menu-label">
              Media stack Mid-Year review
            </p>
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
          </aside>
          <div class="content">
            
<h1 class="title">Media stack Mid-Year review</h1>
<p class="subtitle"><span class="tag is-dark">2019-07-09</span> Summary of what the media team achieved during the first half of 2019 and the plans for the future.</p>

<div class="has-top-margin">
  <p>We recently closed the first half of 2019 and with that it is time to look back and do a quick summary of what the media team has achieved during this 6 months period.</p>
<p>Looking at some stats, we merged 87 Pull Requests, we opened 56 issues, we closed 42 issues and we welcomed 13 new amazing contributors to the media stack.</p>
<h3 id="a%2Fv-playback" tabindex="-1">A/V playback <a class="header-anchor" href="#a%2Fv-playback">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h3>
<p>These are some of the selected A/V playback related H1 acomplishments</p>
<h4 id="media-cache-and-improved-seeking" tabindex="-1">Media cache and improved seeking <a class="header-anchor" href="#media-cache-and-improved-seeking">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>We significally <a href="https://github.com/servo/servo/pull/22692">improved</a> the seeking experience of audio and video files by implementing preloading and buffering support and a media cache.</p>
<iframe title="vimeo-player" src="https://player.vimeo.com/video/311414154" width="640" height="360" frameborder="0" allowfullscreen></iframe>
<h4 id="basic-media-controls" tabindex="-1">Basic media controls <a class="header-anchor" href="#basic-media-controls">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>After a few months of work we got <a href="https://github.com/servo/servo/pull/22743">partial support for the Shadow DOM API</a>, which gave us the opportunity to implement our first basic set of <a href="https://github.com/servo/servo/pull/23208">media controls</a>.</p>
<img src="https://s3.amazonaws.com/media-p.slid.es/uploads/105177/images/6275339/Jun-19-2019_17-11-57.gif" alt="media controls" width="640"/>
<p>The UI is not perfect, among other things, because we still have no way to render a progress or volume bar properly, as that depends on the <code>input type=&quot;range&quot;&gt;</code> layout, which so far is rendered as a simple text box instead of the usual slider with a thumb.</p>
<h4 id="gstreamer-backend-for-magicleap" tabindex="-1">GStreamer backend for MagicLeap <a class="header-anchor" href="#gstreamer-backend-for-magicleap">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>Another great achievement by <a href="https://github.com/xclaesse">Xavier Claessens</a> from <a href="https://www.collabora.com/">Collabora</a> has been the GStreamer backend for <a href="https://www.magicleap.com/">Magic Leap</a>. The work is not completely done yet, but as you can see on the animation below, he already managed to paint a full screen video on the Magic Leap device.</p>
<img src="https://s3.amazonaws.com/media-p.slid.es/uploads/105177/images/6274304/Jun-19-2019_13-12-31.gif" alt="magic leap video" width="640"/>
<h4 id="hardware-accelerated-decoding" tabindex="-1">Hardware accelerated decoding <a class="header-anchor" href="#hardware-accelerated-decoding">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>One of the most wanted features that we have been working on for almost a year and that has recently landed is hardware accelerated decoding.</p>
<p>Thanks to the excellent and constant work from the <a href="https://www.igalia.com/">Igalian</a> <a href="https://github.com/ceyusa">Víctor Jáquez</a>, Servo recently gained <a href="https://github.com/servo/servo/pull/23483">support for hardware-accelerated media playback</a>, which means lower CPU usage, better battery life and better thermal behaviour, among other goodies.</p>
<p>We only have support on Linux and Android (EGL and Wayland) so far. Support for other platforms is on the roadmap.</p>
<p><video src="https://s3.amazonaws.com/media-p.slid.es/videos/105177/rzteE40V/hwacceleration.mp4" width="640" controls></video></p>
<p>The numbers we are getting are already pretty nice. You might not be able to see it clearly on the video, but the renderer CPU time for the non hardware accelerated playback is ~8ms, compared to the ~1ms of CPU time that we get with the accelerated version.</p>
<h4 id="improved-web-compatibility-of-our-media-elements-implementation" tabindex="-1">Improved web compatibility of our media elements implementation <a class="header-anchor" href="#improved-web-compatibility-of-our-media-elements-implementation">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>We also got a bunch of other smaller features that significantly improved the web compatibility of our media elements.</p>
<ul>
<li><a href="https://github.com/servo/ferjm">ferjm</a> <a href="https://github.com/servo/servo/pull/22399">added</a> support for the HTMLMediaElement <code>poster</code> frame attribute</li>
<li><a href="https://github.com/swarnimarun">swarnimarun</a> <a href="https://github.com/servo/servo/pull/23236">implemented</a> support for the HTMLMediaElement <code>loop</code> attribute</li>
<li><a href="https://github.com/jackxbritton">jackxbritton</a> <a href="https://github.com/servo/servo/pull/23188">implemented</a> the HTMLMediaElement <code>crossorigin</code> attribute logic.</li>
<li>Servo got the ability to <a href="https://github.com/servo/servo/pull/22347">mute and unmute</a> as well as controlling the <a href="https://github.com/servo/servo/pull/22324">volume</a> of audio and video playback thanks to <a href="https://github.com/stevesweetney">stevesweetney</a> and <a href="https://github.com/lucasfantacuci">lucasfantacuci</a>.</li>
<li><a href="https://github.com/sreeise">sreeise</a> <a href="https://github.com/servo/servo/pull/22622">implemented</a> the AudioTrack, VideoTrack, AudioTrackList and VideoTrackList interfaces.</li>
<li><a href="https://github.com/georgeroman">georgeroman</a> <a href="https://github.com/servo/servo/pull/22449">coded</a> the required changes to allow changing the playback rate of audio and video files.</li>
<li><a href="https://github.com/georgeroman">georgeroman</a>, again, <a href="https://github.com/servo/media/pull/232">implemented</a> support for the HTMLMediaElement <code>canPlayType</code> function.</li>
<li><a href="https://github.com/dlrobertson">dlrobertson</a> paved the way for timed text tracks support by implementing the basics of the <a href="https://github.com/servo/servo/pull/22392">TextTrack API</a> and the <a href="https://github.com/servo/servo/pull/22563">HTMLTrackElement interface</a>.</li>
</ul>
<h3 id="webaudio" tabindex="-1">WebAudio <a class="header-anchor" href="#webaudio">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h3>
<p>We also got a few additions on the WebAudio land.</p>
<ul>
<li><a href="https://github.com/PurpleHairEngineer">PurpleHairEngineer</a> <a href="https://github.com/servo/media/pull/243">implemented</a> the StereoPannerNode backend.</li>
<li><a href="https://github.com/collares">collares</a> <a href="https://github.com/servo/servo/pull/22648">implemented</a> the DOM side of the ChannelSplitterNode.</li>
<li><a href="https://github.com/Akhilesh1996">Akhilesh1996</a> <a href="https://github.com/servo/servo/pull/23259">implemented</a> the AudioParam setValueCurveAtTime function.</li>
<li><a href="https://github.com/snarasi6">snarasi6</a> <a href="https://github.com/servo/servo/pull/23279">implemented</a> the deprecated setPosition and setOrientation AudioListener methods.</li>
</ul>
<h3 id="webrtc" tabindex="-1">WebRTC <a class="header-anchor" href="#webrtc">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h3>
<p>Thanks to <a href="https://github.com/jdm">jdm</a>’s and <a href="https://github.com/jdm">Manishearth</a>’s work, Servo has now the foundations of a <a href="https://github.com/servo/servo/pull/23377">WebRTC implementation</a> and it is able to perform a 2-way calling with audio and video playback coming from the <a href="https://github.com/servo/servo/pull/22780">getUserMedia API</a>.</p>
<iframe src="https://player.vimeo.com/video/328247783" width="640" height="392" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
<h2 id="next-steps" tabindex="-1">Next steps <a class="header-anchor" href="#next-steps">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p><em>That’s <strong>not</strong> all folks!</em> We have exciting plans for the second half of 2019.</p>
<h4 id="a%2Fv-playback-1" tabindex="-1">A/V playback <a class="header-anchor" href="#a%2Fv-playback-1">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>On the A/V playback land, we want to:</p>
<ul>
<li>Focus on adding hardware accelerated playback on Windows and OSX.</li>
<li>Add support for fullscreen playback.</li>
<li>Add support for 360 video.</li>
<li>Improve the existing media controls by, for instance, implementing a nicer layout for the <code>&lt;input type=&quot;range&quot;&gt;</code> element, with a proper slider and a thumb, so we can have progress and volume bars.</li>
</ul>
<h4 id="webaudio-1" tabindex="-1">WebAudio <a class="header-anchor" href="#webaudio-1">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>For WebAudio there are plans to make some architectural improvements related to the timeline and the graph traversals.</p>
<p>We would also love to work on the MediaElementAudioSourceNode implementation.</p>
<h4 id="webrtc-1" tabindex="-1">WebRTC <a class="header-anchor" href="#webrtc-1">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>For WebRTC, data channels are on the roadmap for the second half.</p>
<p>We currently support the playback of a single stream of audio and video simultaneously, so allowing the playback of multiple simulatenous streams of each type is also something that we would like to get during the following months.</p>
<h4 id="others" tabindex="-1">Others <a class="header-anchor" href="#others">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h4>
<p>There were also plans to implement support for a global mute feature, and I am happy to say, that <a href="https://github.com/khodzha">khodza</a> already <a href="https://github.com/servo/media/pull/271">got this done</a> right at the start of the second half.</p>
<p>Finally, we have been trying to get Youtube to work on Servo, but it turned out to be a difficult task because of non-media related issues (i.e. layout or web compatibility issues), so we decided to adjust the goal and focus on embedded Youtube support instead.</p>

</div>

<div class="has-top-margin buttons has-addons">
  <a class="button" href="/blog/">Back</a>
</div>

          </div>
        </div>
      </section>
    </main>
    <footer class="footer">
  <div class="container" style="text-align: center;">
    <a href="/coc/">Code of Conduct</a> |
    Contact: <a href="mailto:info@servo.org">info@servo.org</a>,
    <a href="https://servo.zulipchat.com/">Zulip Chat</a>,
    <a href="https://github.com/servo/servo/discussions">GitHub Discussions</a>,
    <a href="https://floss.social/@servo">Mastodon</a>,
    <a href="https://twitter.com/ServoDev">Twitter</a>
  </div>
  <div class="container" style="text-align: center; font-size: 0.875em;">
    <p><a href="https://www.linuxfoundation.org"><img src="/img/lf-logo.png" alt="Linux Foundation logo" width="112" style="margin: 1em;"></a></p>
    <p>&copy; 2023 The Servo Project Developers</p>
    <p>Copyright &copy; Servo Project a Series of LF Projects, LLC. LF Projects, LLC is an affiliate of the <a href="https://www.linuxfoundation.org">Linux Foundation</a>.</p>
    <p>For website terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org">https://lfprojects.org</a>.</p>
  </div>
</footer>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
  $(() => {
    const burger = $(".navbar-burger");
    const menu = $(".navbar-menu");
    burger.click(() => {
      [burger, menu].forEach((el) => el.toggleClass('is-active'));
    });
  });
</script>

  </body>
</html>
