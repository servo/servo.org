<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RGSoC wrap-up - Supporting Responsive Images in Servo - Servo, the parallel browser engine</title>
  <meta property="og:title" content="RGSoC wrap-up - Supporting Responsive Images in Servo - Servo, the parallel browser engine">
  

  <meta name="description" content="Servo is an independent, modular, embeddable web rendering engine written in Rust">
  <meta name="keywords" content="servo, servo engine, servo rendering engine, web engine, web rendering engine, web browser, web browser engine, rust">
  <meta name="author" content="The Servo Project Developers">

  <meta property="og:site_name" content="Servo">
  <meta property="og:type" content="website">
  <meta property="og:image" content="/img/servo-color-positive.png">
  <meta property="og:image:alt" content="Servo logo">
  <meta property="og:logo" content="/img/servo-symbol-color-no-container.png">
  <meta property="og:description" content="Servo is an independent, modular, embeddable web rendering engine written in Rust">
  <meta property="og:url" content="/blog/2018/10/23/RGSoC-responsive-images/">

  <link rel="stylesheet" href="/css/style.css">
  <link rel="shortcut icon" href="/img/servo-symbol-color-no-container.png">
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  <link rel="alternate" href="/blog/feed.xml" title="Servo Blog" type="application/atom+xml">
</head>

  <body class="is-page">
    <main class="is-main">
      <nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="/img/servo-color-negative-no-container.png" alt="RGSoC wrap-up - Supporting Responsive Images in Servo">
      </a>

      <a role="button" class="navbar-burger" data-target="navbar-menu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu" id="navbar-menu">
      
        
        
          
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link
            
              
            
          " href="/about/">
              About
            </a>
            <div class="navbar-dropdown">
              
                <a class="navbar-item" href="/governance/">
                  Governance
                </a>
              
            </div>
          </div>
        
      
        
        
          <a class="navbar-item" href="/download/">
            Download
          </a>
        
      
        
        
          
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link
            
              
            
              
            
              
            
          " href="/get-involved/">
              Get Involved
            </a>
            <div class="navbar-dropdown">
              
                <a class="navbar-item" href="/contributing/">
                  Contributing
                </a>
              
                <a class="navbar-item" href="/documentation/">
                  Documentation
                </a>
              
                <a class="navbar-item" href="/coc/">
                  Code of Conduct
                </a>
              
            </div>
          </div>
        
      
        
        
          <a class="navbar-item" href="/sponsorship/">
            Sponsorship
          </a>
        
      
        
        
          <a class="navbar-item" href="/blog/">
            Blog
          </a>
        
      
      <div class="navbar-end">
  
    <div class="navbar-item">
      <a class="button is-github-color" href="https://github.com/servo/servo">
        <span class="icon"><i class="fab fa-github"></i></span>
        <span>GitHub</span>
      </a>
    </div>
  
    <div class="navbar-item">
      <a class="button is-mastodon-color" href="https://floss.social/@servo" rel="me">
        <span class="icon"><i class="fab fa-mastodon"></i></span>
        <span>Mastodon</span>
      </a>
    </div>
  
    <div class="navbar-item">
      <a class="button is-twitter-color" href="https://twitter.com/ServoDev">
        <span class="icon"><i class="fab fa-twitter"></i></span>
        <span>Twitter</span>
      </a>
    </div>
  
</div>

    </div>
  </div>
</nav>

      <section class="section" style="padding-top: 0;">
        <div class="container">
          <aside class="menu box">
            <p class="menu-label">
              RGSoC wrap-up - Supporting Responsive Images in Servo
            </p>
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
          </aside>
          <div class="content">
            
<h1 class="title">RGSoC wrap-up - Supporting Responsive Images in Servo</h1>
<p class="subtitle"><span class="tag is-dark">2018-10-23</span> Our experience of contributing to Servo</p>

<div class="has-top-margin">
  <h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>Hey everyone, this is Nupur Baghel and Paavini Nanda, from the team ‚Äú101 Days of Summer‚Äù.  Both of us are computer engineering undergraduate students from New Delhi, India. We were involved with Servo this summer under the Rails Girls Summer of Code program and spent an amazing 3 months implementing functionalities to support responsive images in Servo &lt;3</p>
<h2 id="a-little-about-rgsoc" tabindex="-1">A little about RGSoC <a class="header-anchor" href="#a-little-about-rgsoc">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p><a href="https://railsgirlssummerofcode.org/">RGSoC</a> is an initiative which helps in introducing women to open source in a team consisting of a pair. It is a fully paid three-months internship program. To be a part of the it, one needs to have at least two coaches which you have to find, a supervisor which RGSoC provides and a mentor who is related to the organisation. While searching for a project to work on, Servo seemed to be a great project which could give us hands-on experience in Rust. As complete beginners to Rust, we thought it would be a tough call to work on the project but with the help of Josh, we were able to complete our project.</p>
<h2 id="what-are-responsive-images%3F" tabindex="-1">What are Responsive Images? <a class="header-anchor" href="#what-are-responsive-images%3F">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>Imagine you want to open a website containing a wide high resolution image in your desktop. Since your desktop is wide, you will be clearly able to view the entire image. Also, owing to the well support of pixel resolution in your laptop, you will be happy loading the image completely‚Ä¶.But now consider a different situation,  where you want to open the same website in your small-sized cell phone. There are 2 problems here-</p>
<ol>
<li>Your image size gets scaled down to fit the new screen size. But you may now want a different image instead of the older one, which emphasises just the main portion of the original image. (For eg, a cropped image with just the center part)</li>
</ol>
<p><img src="/img/blog/view_laptop.jpg" alt="Desktop view!"></p>
<div><em>Image 1. View on Desktop</em></div>
<br/>
<br/>
<p><img src="/img/blog/view_phone.jpg" alt="Phone view!"></p>
<div ><em>Image 2. View on Phone</em></div>
<br/>
<br/>
<p>Solution: Responsive images solves this by supplying a list of image sources in the sizes attribute of image element so that we can know which image is to be displayed depending on screen sizes.</p>
<ol start="2">
<li>Considering the above solution is implemented and you have a list of images, we would now want to load only the specific lower density image which matches the size of the phone and discard downloading the other images to waste unnecessary bandwidth. Thus if there is phone 1 and phone 2 with different screen sizes we would be loading 2 different images. Illustrated below :</li>
</ol>
<p><img src="/img/blog/view_phone2.jpeg" alt="Phone view!"></p>
<div ><em>Image 3. Phone X and Phone Y should load different images</em></div>
<br/>
<br/>
<p>Solution: For this, we have algorithms which match the size of the device to determine the required image. Incase our device width changes, (for eg if we change the orientation from horizontal to vertical) we can then respectively change the image to a more suitable one from the list. Thus, we load only the image which is required and store the already loaded ones so that we are not loading them repeatedly.</p>
<p>To summarise, responsive images is the capability of the browser engine to display the most perfectly suiting image from a given list of images by taking into account factors like the width and density of the device together with the capability of minimising bandwidth usage by maintaining a cache record of previously loaded images and loading new ones only when required.</p>
<p>Here is a demo -
<br/>
<img src="/img/blog/responsive_images.gif" alt="Gif!"></p>
<div ><em>Gif 1. Responsive images</em></div>
<h2 id="how-all-this-was-accomplished" tabindex="-1">How all this was accomplished <a class="header-anchor" href="#how-all-this-was-accomplished">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>The links to the pull requests for each of these has been given below -</p>
<ol>
<li>
<p>Implementing reacting to environment changes:
<a href="https://github.com/servo/servo/pull/21280">https://github.com/servo/servo/pull/21280</a></p>
</li>
<li>
<p>Implementing update the source set &amp; reintroduction of parse a sizes attribute
<a href="https://github.com/servo/servo/pull/21181">https://github.com/servo/servo/pull/21181</a></p>
</li>
<li>
<p>Implementing selecting the correct image source for different pixel densities
<a href="https://github.com/servo/servo/pull/21628">https://github.com/servo/servo/pull/21628</a></p>
</li>
<li>
<p>Correcting behaviour of currentSrc
<a href="https://github.com/servo/servo/pull/21533">https://github.com/servo/servo/pull/21533</a></p>
</li>
<li>
<p>Implementing all the relevant mutations:
<a href="https://github.com/servo/servo/pull/21680">https://github.com/servo/servo/pull/21680</a></p>
</li>
</ol>
<p>For the test - tests/wpt/web-platform-tests/html/semantics/embedded-content/the-img-element/current-pixel-density/ the below changes were seen -</p>
<p>In this test, there are 8 different image elements, each of which has the same green coloured square box - /images/green-256x256.png but with different x values and different sizes. So before the implementation of the code, there was a single box which could be seen. But now with passing tests, all the different sized boxes are visible.</p>
<p><img src="/img/blog/test1.jpeg" alt="Phone view!"></p>
<div ><em>Image 4. Results before the tests passed</em></div>
<br/>
<br/>
<p><img src="/img/blog/test2.jpeg" alt="Phone view!"></p>
<div><em>Image 5. Passing test results</em></div>
<h2 id="statistics" tabindex="-1">Statistics <a class="header-anchor" href="#statistics">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<ul>
<li>In total we got <strong>20 PR‚Äôs</strong> merged by the end of RGSoC. Approximately 10 each for the both of us. Hooray!!</li>
<li>We worked on more than <strong>5 algorithms</strong></li>
<li>Our code resulted in passing of more than <strong>700 new tests</strong> üòÆ Seems unbelievable? Go and search for the word fail at - <a href="https://github.com/servo/servo/pull/21280/files?utf8=%E2%9C%93&amp;diff=unified">click me!</a></li>
<li>And finally, we wrote more than <strong>800 new lines</strong> of code!</li>
</ul>
<h2 id="future-work" tabindex="-1">Future work <a class="header-anchor" href="#future-work">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>Some of the tests are still failing and need to be corrected. We spent a lot of time correcting the already existing tests, many of them were failing because they were intermittent tests. These are the tests which might be failing due to the timing problems. So if there are any such test which fail on the local machine and not on the remote one or vice-a-versa, it is possible that these tests are intermittent. Don‚Äôt worry about any such tests :P. Some of the timing out tests which still needs to be corrected are here - <a href="https://github.com/paavininanda/servo/blob/2de300d49cc90f6c2daf31e8ef8a7c0443eb0a94/tests/wpt/metadata/html/semantics/embedded-content/the-img-element/environment-changes/viewport-change.html.ini">https://github.com/paavininanda/servo/blob/2de300d49cc90f6c2daf31e8ef8a7c0443eb0a94/tests/wpt/metadata/html/semantics/embedded-content/the-img-element/environment-changes/viewport-change.html.ini</a> . Also the implementation of one of the functions i.e. <em>matches_environment</em> needs to be looked upon. Here is a link for it - <a href="https://github.com/servo/servo/issues/21587#issuecomment-424850214">https://github.com/servo/servo/issues/21587#issuecomment-424850214</a>.</p>
<h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>These 3 months have been really amazing for us. All that started with us being lost deep in thought about how to begin contributing to Servo has changed. We have evolved a lot and have got so closely involved with open source that we consider the community as our small family. We have loved it completely! It has been a pleasure to make some useful contributions to Servo. A huge shoutout to Josh and the whole Servo community for making it possible. Now, we feel ready to help more beginners to get started with Servo as well üôå</p>

</div>

<div class="has-top-margin buttons has-addons">
  <a class="button" href="/blog/">Back</a>
</div>

          </div>
        </div>
      </section>
    </main>
    <footer class="footer">
  <div class="container" style="text-align: center;">
    <a href="/coc/">Code of Conduct</a> |
    Contact: <a href="mailto:info@servo.org">info@servo.org</a>,
    <a href="https://servo.zulipchat.com/">Zulip Chat</a>,
    <a href="https://github.com/servo/servo/discussions">GitHub Discussions</a>,
    <a href="https://floss.social/@servo">Mastodon</a>,
    <a href="https://twitter.com/ServoDev">Twitter</a>
  </div>
  <div class="container" style="text-align: center; font-size: 0.875em;">
    <p><a href="https://www.linuxfoundation.org"><img src="/img/lf-logo.png" alt="Linux Foundation logo" width="112" style="margin: 1em;"></a></p>
    <p>&copy; 2023 The Servo Project Developers</p>
    <p>Copyright &copy; Servo Project a Series of LF Projects, LLC. LF Projects, LLC is an affiliate of the <a href="https://www.linuxfoundation.org">Linux Foundation</a>.</p>
    <p>For website terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org">https://lfprojects.org</a>.</p>
  </div>
</footer>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
  $(() => {
    const burger = $(".navbar-burger");
    const menu = $(".navbar-menu");
    burger.click(() => {
      [burger, menu].forEach((el) => el.toggleClass('is-active'));
    });
  });
</script>

  </body>
</html>
