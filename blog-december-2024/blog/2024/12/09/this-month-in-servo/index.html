<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>This month in Servo: :is() and :where(), grid layout, parallel flexbox, and more! - Servo, the embeddable, independent, memory-safe, modular, parallel web rendering engine</title>
  <meta property="og:title" content="This month in Servo: :is() and :where(), grid layout, parallel flexbox, and more! - Servo, the embeddable, independent, memory-safe, modular, parallel web rendering engine">
  

  
  <meta name="description" content="Plus shadow DOM buffs, smaller binaries, and new SubtleCrypto algorithms (HMAC, AES-GCM, AES-KW, PBKDF2).">
  <meta name="og:description" content="Plus shadow DOM buffs, smaller binaries, and new SubtleCrypto algorithms (HMAC, AES-GCM, AES-KW, PBKDF2).">
  
  <meta name="keywords" content="servo, servo engine, servo rendering engine, web engine, web rendering engine, web browser, web browser engine, rust">
  <meta name="author" content="The Servo Project Developers">

  <meta property="og:site_name" content="Servo">
  <meta property="og:type" content="website">
  <meta property="og:image" content="/blog-december-2024/img/servo-color-positive.png">
  <meta property="og:image:alt" content="Servo logo">
  <meta property="og:logo" content="/blog-december-2024/img/servo-symbol-color-no-container.png">
  <meta property="og:url" content="/blog-december-2024/blog/2024/12/09/this-month-in-servo/">

  <link rel="stylesheet" href="/blog-december-2024/css/style.css">
  <link rel="shortcut icon" href="/blog-december-2024/img/servo-symbol-color-no-container.png">
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  <link rel="alternate" href="/blog-december-2024/blog/feed.xml" title="Servo Blog" type="application/atom+xml">
</head>

  <body class="is-page">
    <main class="is-main">
      <nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/blog-december-2024/">
        <img src="/blog-december-2024/img/servo-color-negative-no-container.png" alt="This month in Servo: :is() and :where(), grid layout, parallel flexbox, and more!">
      </a>

      <a role="button" class="navbar-burger" data-target="navbar-menu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu" id="navbar-menu">
      
        
        
          
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link
            
              
            
              
            
              
            
              
            
          " href="#">
              Get Involved
            </a>
            <div class="navbar-dropdown">
              
                <a class="navbar-item" href="/blog-december-2024/contributing/">
                  Contributing
                </a>
              
                <a class="navbar-item" href="https://book.servo.org" target="_blank">
                  Servo Book
                </a>
              
                <a class="navbar-item" href="https://wpt.servo.org/" target="_blank">
                  WPT pass rates
                </a>
              
                <a class="navbar-item" href="/blog-december-2024/coc/">
                  Code of Conduct
                </a>
              
            </div>
          </div>
        
      
        
        
          <a class="navbar-item" href="/blog-december-2024/download/">
            Download
          </a>
        
      
        
        
          <a class="navbar-item" href="/blog-december-2024/blog/">
            Blog
          </a>
        
      
        
        
          <a class="navbar-item" href="https://demo.servo.org/" target="_blank">
            Demos
          </a>
        
      
        
        
          
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link
            
              
            
              
            
              
            
              
            
          " href="#">
              About
            </a>
            <div class="navbar-dropdown">
              
                <a class="navbar-item" href="/blog-december-2024/about/">
                  About Servo
                </a>
              
                <a class="navbar-item" href="https://github.com/servo/project/blob/main/governance/README.md" target="_blank">
                  Governance
                </a>
              
                <a class="navbar-item" href="/blog-december-2024/sponsorship/">
                  Sponsorship
                </a>
              
                <a class="navbar-item" href="/blog-december-2024/acknowledgements/">
                  Acknowledgements
                </a>
              
            </div>
          </div>
        
      
      <div class="navbar-end">
  <div class="navbar-item buttons has-addons">
    
      <a class="button is-github-color" title="GitHub" href="https://github.com/servo/servo">
        <span class="icon"><i class="fab fa-github"></i></span>
      </a>
    
      <a class="button is-mastodon-color" title="Mastodon" href="https://floss.social/@servo" rel="me">
        <span class="icon"><i class="fab fa-mastodon"></i></span>
      </a>
    
      <a class="button is-bluesky-color" title="Bluesky" href="https://bsky.app/profile/servo.org">
        <span class="icon"><i class="fab fa-bluesky"></i></span>
      </a>
    
      <a class="button is-twitter-color" title="Twitter" href="https://twitter.com/ServoDev">
        <span class="icon"><i class="fab fa-twitter"></i></span>
      </a>
    
      <a class="button is-linkedin-color" title="LinkedIn" href="https://www.linkedin.com/company/servo-project/">
        <span class="icon"><i class="fab fa-linkedin"></i></span>
      </a>
    
  </div>
</div>

    </div>
  </div>
</nav>

      <section class="section" style="padding-top: 0;">
        <div class="container">
          <aside class="menu box">
            <p class="menu-label">
              This month in Servo: :is() and :where(), grid layout, parallel flexbox, and more!
            </p>
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
          </aside>
          <div class="content">
            
<h1 class="title">This month in Servo: :is() and :where(), grid layout, parallel flexbox, and more!</h1>
<p class="subtitle"><span class="tag is-dark">2024-12-09</span> Plus shadow DOM buffs, smaller binaries, and new SubtleCrypto algorithms (HMAC, AES-GCM, AES-KW, PBKDF2).</p>

<div class="has-top-margin">
  <figure class="_figr"><a href="/blog-december-2024/img/blog/november-2024.png"><img src="/blog-december-2024/img/blog/november-2024.png" style="width: 33em;"
    alt="Servo nightly showing new support for CSS grid layout"></a></figure>
<p>Servo now supports <strong>CSS grid layout</strong> (@nicoburns, @taniishkaa, #32619, #34352, #34421), <strong>parallel layout for flexbox</strong> (@mrobinson, #34132), and <strong>:is() and :where() selectors</strong> (@mrobinson, #34066)!
We’ve also added support for two key Shadow DOM interfaces, the <strong>shadowRoot property</strong> on Element (@simonwuelker, #34306) and the <strong>innerHTML property on ShadowRoot</strong> (@simonwuelker, #34335).</p>
<p>Last month we also landed support for <strong>‘justify-self’</strong> on positioned elements (@chickenleaf, #34235), form submission with <strong>&lt;input type=image&gt;</strong> (@shanehandley, #34203), <strong>DataTransfer</strong> (@Gae24, #34205), the <strong>close()</strong> method on ImageBitmap (@simonwuelker, #34124), plus several new <strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto">SubtleCrypto</a> API</strong> features:</p>
<ul>
<li>crypto.subtle.<strong>deriveKey()</strong> (@simonwuelker, #34185)</li>
<li><strong>wrapKey()</strong> and <strong>unwrapKey()</strong> (@msub2, #34262)</li>
<li><strong>“HMAC”</strong> algorithm in <strong>generateKey()</strong> (@simonwuelker, #34278), <strong>sign()</strong>, <strong>verify()</strong> (@simonwuelker, #34223), and <strong>deriveKey(<code>&quot;get key length&quot;</code>)</strong> (@simonwuelker, #34230)</li>
<li><strong>“AES-GCM”</strong> algorithm in <strong>encrypt()</strong>, <strong>decrypt()</strong>, <strong>generateKey()</strong>, and <strong>importKey()</strong> (@simonwuelker, #34269)</li>
<li><strong>“AES-KW”</strong> algorithm in <strong>generateKey()</strong>, <strong>importKey()</strong>, <strong>wrapKey()</strong>, and <strong>unwrapKey()</strong> (@msub2, #34262)</li>
<li><strong>“PBKDF2”</strong> (@simonwuelker, #34164) and <strong>“HKDF”</strong> (@simonwuelker, #34200) algorithms in <strong>deriveBits()</strong></li>
</ul>
<p>On OpenHarmony, we’ve landed <strong>keyboard input</strong> and the IME (@jschwe, @jdm, @mukilan, #34188), <strong>touch fling gestures</strong> (@jschwe, @mrobinson, #33219), and additional <strong>CJK fallback fonts</strong> (@jschwe, #34410).
You can now build for OpenHarmony on a Windows machine (@jschwe, #34113), and build errors have been improved (@jschwe, #34267).</p>
<h2 id="more-engine-changes" tabindex="-1">More engine changes <a class="header-anchor" href="#more-engine-changes">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>You can now <strong>scroll the viewport</strong> and scrollable elements <strong>with your pointer anywhere in the area</strong>, not just when hovering over actual content (@mrobinson, @mukilan, #34347).
<code>--unminify-js</code>, a very useful feature for <a href="https://book.servo.org/hacking/web-compat-bugs.html#diagnosing-js-errors">diagnosing Servo bugs in real websites</a>, now supports module scripts (@jdm, #34206).</p>
<p>We’ve fixed the behaviour of <strong>offsetLeft</strong> and <strong>offsetTop</strong> relative to &lt;body&gt; with ‘position: static’ (@nicoburns, @Loirooriol, #32761), which also required spec changes (@nicoburns, @Loirooriol, csswg-drafts#10549).
We’ve also fixed several layout bugs around:</p>
<ul>
<li><strong>‘object-fit’</strong> when ‘aspect-ratio’ is set (@Loirooriol, #34413)</li>
<li><strong>clientWidth</strong> and friends on floats and replaced inlines (@Loirooriol, #34083)</li>
<li><strong>‘align-items’</strong> and <strong>‘align-self: stretch’</strong> (@mrobinson, @Loirooriol, #34162)</li>
<li><strong>main axis free space</strong> in flexbox (@mrobinson, #34150)</li>
<li><strong>min-</strong> and <strong>max-content block sizes</strong> of replaced elements (@Loirooriol, #34284)</li>
<li>sizing of non-replaced positioned elements with <strong>‘place-self’</strong> (@taniishkaa, #34264)</li>
</ul>
<p>The <strong>getClientRects()</strong> method on Element now correctly returns a DOMRectList (@chickenleaf, #34025).</p>
<p><strong>Stylo</strong> has been updated to 2024-11-01 (@Loirooriol, #34322), and we’ve landed some changes to prepare our fork of Stylo for publishing releases on <a href="http://crates.io">crates.io</a> (@mrobinson, @nicoburns, #34332, #34353).
We’ve also made more progress towards <strong>splitting up our massive <code>script</code> crate</strong> (@jdm, @sagudev, #34357, #34356, #34163), which will eventually allow Servo to be built (and rebuilt) much faster.</p>
<h2 id="performance-improvements" tabindex="-1">Performance improvements <a class="header-anchor" href="#performance-improvements">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>In addition to parallel layout for flexbox (@mrobinson, #34132), we’ve landed several other performance improvements:</p>
<ul>
<li>faster layout for <strong>‘column’ flex containers</strong> (@Loirooriol, @mrobinson, #34346)</li>
<li>faster caching of intrinsic sizes (@Loirooriol, #34384)</li>
<li>caching of font template matches (@mukilan, @mrobinson, #34325)</li>
<li>fixed warnings and memory leak when WebRender is running late (@mrobinson, @mukilan, #34305)</li>
</ul>
<p>We’ve also landed some changes to reduce Servo’s binary size:</p>
<ul>
<li>legacy layout is no longer built by default (@jschwe, #34290)</li>
<li>Servo no longer depends on <code>sparkle</code>, only <code>glow</code> and <code>gleam</code> (@sagudev, #33918, #34292)</li>
<li>Servo can now be built without WebXR support (@wusyong, @augustkline, @jdm, @sagudev, #34241, #34348)</li>
<li>servoshell can now be built without WebXR on OpenHarmony and Android (@jschwe, #34242), with more platforms to come</li>
<li>plus some progress towards a build-time feature flag for WebGPU (@atbrakhi, #34415)</li>
</ul>
<p>Servo’s <strong><a href="https://docs.rs/tracing/0.1.40/tracing/">tracing</a>-based profiling support</strong> (<code>--features tracing-perfetto</code> or <code>tracing-hitrace</code>) now supports <strong>filtering events</strong> via an environment variable (@delan, #34236, #34256), and no longer includes events from non-Servo crates by default (@delan, #34209).
Note that when the filter matches some span or event, it will also match all of its descendants for now, but this is a limitation we intend to fix.</p>
<p>Most of the events supported by the old interval profiler have been <strong>ported to tracing</strong> (@delan, #34238, #34337).
<strong>ScriptParseHTML</strong> and <strong>ScriptParseXML</strong> events no longer count the time spent doing layout and script while parsing, reducing them to more realistic times (@delan, #34273), while <strong>ScriptEvaluate</strong> events now count the time spent running scripts in timers, DOM event listeners, and many other situations (@delan, #34286), increasing them to more realistic times.</p>
<p>We’ve added new tracing events for <strong>display list building</strong> (@atbrakhi, #34392), <strong>flex layout</strong>, <strong>inline layout</strong>, and <strong>font loading</strong> (@delan, #34392).
This will help us diagnose performance issues around things like caching and relayout for ‘stretch’ in flex layout, shaping text runs, and font template creation.</p>
<h2 id="for-developers" tabindex="-1">For developers <a class="header-anchor" href="#for-developers">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>Hacking on Servo is now easier, with our <strong>new <code>--profile medium</code> build mode</strong> in Cargo (@jschwe, #34035).
<code>medium</code> is more optimised than <code>debug</code>, but unlike <code>release</code>, it supports debuggers, line numbers in backtraces, and incremental builds.</p>
<p>Servo <strong>now uses <a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners">CODEOWNERS</a></strong> to list reviewers that are experts in <a href="https://github.com/servo/servo/blob/3515b83a95cb65da30c1e3988f7a47f79fd7b9bd/.github/CODEOWNERS">parts of our main repo</a>.
This should make it much easier to find reviewers that know how to review your code, and helps us maximise the quality of our code reviews by allowing reviewers to specialise.</p>
<h2 id="donations" tabindex="-1">Donations <a class="header-anchor" href="#donations">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>Thanks again for your generous support!
We are now receiving <strong>4291 USD/month</strong> (+2.1% over October) in recurring donations.
<strong>We are no longer accepting donations on LFX</strong> — if you were donating there, please move your recurring donations to <a href="https://github.com/sponsors/servo">GitHub</a> or <a href="https://opencollective.com/servo">Open Collective</a>.</p>
<p>Servo is also on <a href="https://thanks.dev">thanks.dev</a>, and already <strong>fifteen GitHub users</strong> that depend on Servo are sponsoring us there.
If you use Servo libraries like <a href="https://crates.io/crates/url/reverse_dependencies">url</a>, <a href="https://crates.io/crates/html5ever/reverse_dependencies">html5ever</a>, <a href="https://crates.io/crates/selectors/reverse_dependencies">selectors</a>, or <a href="https://crates.io/crates/cssparser/reverse_dependencies">cssparser</a>, signing up for <a href="https://thanks.dev">thanks.dev</a> could be a good way for you (or your employer) to give back to the community.</p>
<figure class="_fig" style="width: 100%; margin: 1em 0;"><div class="_flex" style="height: calc(1lh + 3em); flex-flow: column nowrap; text-align: left;">
    <div style="position: relative; text-align: right;">
        <div style="position: absolute; margin-left: calc(100% * 4291 / 10000); padding-left: 0.5em;"><strong>4291</strong> USD/month</div>
        <div style="position: absolute; margin-left: calc(100% * 4291 / 10000); height: calc(1lh + 1.5em); border-left: 1px solid;"></div>
        <div style="position: absolute; margin-left: calc(100% - 0.5em); height: calc(1lh + 1.5em); border-left: 1px solid;"></div>
        <div style="padding-right: 1em;"><strong>10000</strong><!-- USD/month --></div>
    </div>
    <progress value="4291" max="10000" style="transform: scale(3); transform-origin: top left; width: calc(100% / 3);"></progress>
</div></figure>
<p>With this money, we’ve been able to cover our web hosting and self-hosted CI runners for Windows and Linux builds.
When the time comes, we’ll also be able to afford macOS runners and perf bots, as well as additional Outreachy interns next year!
As always, use of these funds will be decided transparently in the Technical Steering Committee.
For more details, head to our <a href="/blog-december-2024/sponsorship/">Sponsorship page</a>.</p>
<style>
    /* guaranteed minimum width for first paragraph after a float */
    ._floatmin {
        display: block;
        width: 13em;
        overflow: hidden;
    }
    ._none {
        display: none;
    }
    ._fig:not(#specificity) {
        width: 33em;
        max-width: 100%;
        margin: 1em auto;
    }
    ._fig > ._flex {
        display: flex;
    }
    ._fig table {
        text-align: initial;
    }
    ._fig figcaption._notes {
        text-align: left;
        width: max-content;
        max-width: 100%;
    }
    ._figl:not(#specificity),
    ._figr:not(#specificity) {
        margin: 0 1em 1em;
    }
    ._figl {
        float: left;
        max-width: 100%;
    }
    ._figr {
        float: right;
        max-width: 100%;
    }
    ._figl > figcaption,
    ._figr > figcaption,
    ._figl > iframe,
    ._figr > iframe,
    ._figl > video,
    ._figr > video,
    ._figl > a > img,
    ._figr > a > img {
        width: 21em;
        max-width: 100%;
    }
    ._runin {
        margin-bottom: 1em;
    }
    ._runin > p,
    ._runin > h2 {
        display: inline;
    }
    ._correction {
        max-width: 33em;
        margin: 1em auto;
        border-bottom: 1px solid;
        padding-bottom: 1em;
    }
    ._note {
        margin: 1em 1em;
        border-left: 1px solid;
        padding-left: 1em;
        opacity: 0.75;
    }
</style>

</div>

<div class="has-top-margin buttons has-addons">
  <a class="button" href="/blog-december-2024/blog/">Back</a>
</div>

          </div>
        </div>
      </section>
    </main>
    <footer class="footer">
  <div class="container" style="text-align: center;">
    <a href="/blog-december-2024/coc/">Code of Conduct</a> |
    Contact: <a href="mailto:info@servo.org">info@servo.org</a>,
    <a href="https://servo.zulipchat.com/">Zulip Chat</a>,
    <a href="https://github.com/servo/servo/discussions">GitHub Discussions</a>,
    <a href="https://floss.social/@servo">Mastodon</a>,
    <a href="https://bsky.app/profile/servo.org">Bluesky</a>,
    <a href="https://twitter.com/ServoDev">Twitter</a>,
    <a href="https://www.linkedin.com/company/servo-project/">LinkedIn</a>
  </div>
  <div class="container" style="text-align: center; font-size: 0.875em;">
    <p><a href="https://linuxfoundation.eu"><img src="/blog-december-2024/img/lf-europe-logo.png" alt="Linux Foundation Europe logo" width="250" style="margin: 1em;"></a></p>
    <p>&copy; 2024 The Servo Project Developers</p>
    <p>Copyright &copy; Servo is a project of <a href="https://linuxfoundation.eu/">Linux Foundation Europe</a>.</p>
    <p>For website terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org">https://lfprojects.org</a>.</p>
  </div>
</footer>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
  $(() => {
    const burger = $(".navbar-burger");
    const menu = $(".navbar-menu");
    burger.click(() => {
      [burger, menu].forEach((el) => el.toggleClass('is-active'));
    });
  });
</script>

  </body>
</html>
