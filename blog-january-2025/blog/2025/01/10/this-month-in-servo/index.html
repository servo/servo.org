<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>This month in Servo: dark mode, keyword sizes, XPath, and more! - Servo aims to empower developers with a lightweight, high-performance alternative for embedding web technologies in applications.</title>
  <meta property="og:title" content="This month in Servo: dark mode, keyword sizes, XPath, and more! - Servo aims to empower developers with a lightweight, high-performance alternative for embedding web technologies in applications.">
  

  
  <meta name="description" content="Servo nightlies are now faster, more reliable, 20% smaller, and more compatible with real web apps.">
  <meta name="og:description" content="Servo nightlies are now faster, more reliable, 20% smaller, and more compatible with real web apps.">
  
  <meta name="keywords" content="servo, servo engine, servo rendering engine, web engine, web rendering engine, web browser, web browser engine, rust">
  <meta name="author" content="The Servo Project Developers">

  <meta property="og:site_name" content="Servo">
  <meta property="og:type" content="website">
  <meta property="og:image" content="/blog-january-2025/img/servo-color-positive.png">
  <meta property="og:image:alt" content="Servo logo">
  <meta property="og:logo" content="/blog-january-2025/img/servo-symbol-color-no-container.png">
  <meta property="og:url" content="/blog-january-2025/blog/2025/01/10/this-month-in-servo/">

  <link rel="stylesheet" href="/blog-january-2025/css/style.css">
  <link rel="shortcut icon" href="/blog-january-2025/img/servo-symbol-color-no-container.png">
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  <link rel="alternate" href="/blog-january-2025/blog/feed.xml" title="Servo Blog" type="application/atom+xml">
</head>

  <body class="is-page">
    <main class="is-main">
      <nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="inner-container">
      <div class="navbar-brand">
        <a href="/blog-january-2025/">
          <img src="/blog-january-2025/img/servo-color.png" alt="This month in Servo: dark mode, keyword sizes, XPath, and more!">
        </a>

        <button id="hamburgerMenu" class="navbar-burger" data-target="navbar-menu" aria-label="menu" aria-expanded="false" type="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </button>
      </div>

      <div class="navbar-menu" id="navbar-menu">
        
          
          
            
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link
              
                
              
                
              
                
              
                
              
            " href="#">
                Get Involved
              </a>
              <div class="navbar-dropdown">
                
                  <a class="navbar-item" href="/blog-january-2025/contributing/">
                    Contributing
                  </a>
                
                  <a class="navbar-item" href="https://book.servo.org" target="_blank">
                    Servo Book
                  </a>
                
                  <a class="navbar-item" href="https://wpt.servo.org/" target="_blank">
                    WPT pass rates
                  </a>
                
                  <a class="navbar-item" href="/blog-january-2025/coc/">
                    Code of Conduct
                  </a>
                
              </div>
            </div>
          
        
          
          
            <a class="navbar-item" href="/blog-january-2025/download/">
              Download
            </a>
          
        
          
          
            <a class="navbar-item" href="/blog-january-2025/blog/">
              Blog
            </a>
          
        
          
          
            <a class="navbar-item" href="https://demo.servo.org/" target="_blank">
              Demos
            </a>
          
        
          
          
            
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link
              
                
              
                
              
                
              
                
              
            " href="#">
                About
              </a>
              <div class="navbar-dropdown">
                
                  <a class="navbar-item" href="/blog-january-2025/about/">
                    About Servo
                  </a>
                
                  <a class="navbar-item" href="https://github.com/servo/project/blob/main/governance/README.md" target="_blank">
                    Governance
                  </a>
                
                  <a class="navbar-item" href="/blog-january-2025/sponsorship/">
                    Sponsorship
                  </a>
                
                  <a class="navbar-item" href="/blog-january-2025/acknowledgements/">
                    Acknowledgements
                  </a>
                
              </div>
            </div>
          
        
        <div class="navbar-end">
    
      <a class="social-link is-github-color" title="GitHub" href="https://github.com/servo/servo">
        <span class="icon"><i class="fab fa-github"></i></span>
      </a>
    
      <a class="social-link is-mastodon-color" title="Mastodon" href="https://floss.social/@servo" rel="me">
        <span class="icon"><i class="fab fa-mastodon"></i></span>
      </a>
    
      <a class="social-link is-bluesky-color" title="Bluesky" href="https://bsky.app/profile/servo.org">
        <span class="icon"><i class="fab fa-bluesky"></i></span>
      </a>
    
      <a class="social-link is-linkedin-color" title="LinkedIn" href="https://www.linkedin.com/company/servo-project/">
        <span class="icon"><i class="fab fa-linkedin"></i></span>
      </a>
    
</div>

      </div>
    </div>
  </div>
</nav>

<script>
  const hamburger = document.getElementById('hamburgerMenu');
  const menu = document.getElementById('navbar-menu');

  const toggleMenu = () => {
    const isExpanded = hamburger.getAttribute('aria-expanded') === 'true';
    hamburger.setAttribute('aria-expanded', !isExpanded);
    menu.classList.toggle('is-active', isExpanded);
  };

  // Toggle on click
  hamburger.addEventListener('click', toggleMenu);


</script>
          <div class="content" id="This month in Servo: dark mode, keyword sizes, XPath, and more!">
            
<div class="blog-hero">
  <div class="container">
    <div class="inner-container">
    <h1 class="title">This month in Servo: dark mode, keyword sizes, XPath, and more!</h1>
      <p class="subtitle">Servo nightlies are now faster, more reliable, 20% smaller, and more compatible with real web apps.</p>
      <p class="posted">Posted <span class="tag is-dark">2025-01-10</span></p>
    </div>
  </div>
</div>

<div class="inner-container blog-content">
  <p>Servo now supports <strong>dark mode</strong> (<a href="https://github.com/arthmis">@arthmis</a>, <a href="https://github.com/lazypassion">@lazypassion</a>, <a href="https://github.com/servo/servo/pull/34532">#34532</a>), respecting the platform dark mode in servoshell and <strong>‘prefers-color-scheme’</strong> (<a href="https://github.com/nicoburns">@nicoburns</a>, <a href="https://github.com/servo/servo/pull/34423">#34423</a>, <a href="https://github.com/servo/stylo/pull/93">stylo#93</a>) on Windows and macOS.</p>
<figure>
    <div style="display: flex;">
        <a href="/blog-january-2025/img/blog/dark-mode-december-2024.png"><img src="/blog-january-2025/img/blog/dark-mode-december-2024.png"
            alt="servoshell in dark mode, rendering the MDN article for ‘prefers-color-scheme’ in dark mode, when Windows is set to dark mode"></a>
        <a href="/blog-january-2025/img/blog/light-mode-december-2024.png"><img src="/blog-january-2025/img/blog/light-mode-december-2024.png"
            alt="servoshell in light mode, rendering the MDN article for ‘prefers-color-scheme’ in light mode, when Windows is set to light mode"></a>
    </div>
    <figcaption><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme">MDN article for ‘prefers-color-scheme’</a> in dark mode (left) and light mode (right), with <code>--pref dom.resize_observer.enabled</code>.</figcaption>
</figure>
<p><strong>CSS transitions</strong> can now be triggered properly by script (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/34486">#34486</a>), and we now support <strong>‘min-height’</strong> and <strong>‘max-height’</strong> on column flex containers (<a href="https://github.com/Loirooriol">@Loirooriol</a>, <a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/34450">#34450</a>), <strong>‘min-content’</strong>, <strong>‘max-content’</strong>, <strong>‘fit-content’</strong>, and <strong>‘stretch’</strong> in block layout (<a href="https://github.com/Loirooriol">@Loirooriol</a>, <a href="https://github.com/servo/servo/pull/34641">#34641</a>, <a href="https://github.com/servo/servo/pull/34568">#34568</a>, <a href="https://github.com/servo/servo/pull/34695">#34695</a>), <strong>‘stretch’</strong> on replaced positioned elements (<a href="https://github.com/Loirooriol">@Loirooriol</a>, <a href="https://github.com/servo/servo/pull/34430">#34430</a>), as well as <strong>‘align-self: self-start’</strong>, <strong>‘self-end’</strong>, <strong>‘left’</strong>, and <strong>‘right’</strong> on positioned elements (<a href="https://github.com/taniishkaaa">@taniishkaaa</a>, <a href="https://github.com/Loirooriol">@Loirooriol</a>, <a href="https://github.com/servo/servo/pull/34365">#34365</a>).</p>
<p>Servo can now run <a href="https://discord.com"><strong>Discord</strong></a> well enough to <a href="https://discord.com/login"><strong>log in</strong></a> and <strong>read messages</strong>, though you can’t send messages yet.
To get this working, we landed some bare-bones AbortController support (<a href="https://github.com/jdm">@jdm</a>, <a href="https://github.com/syvb">@syvb</a>, <a href="https://github.com/servo/servo/pull/34519">#34519</a>) and a WebSocket fix (<a href="https://github.com/jdm">@jdm</a>, <a href="https://github.com/servo/servo/pull/34634">#34634</a>).
Try it yourself with <code>--pref dom.svg.enabled --pref dom.intersection_observer.enabled --pref dom.abort_controller.enabled</code>!</p>
<figure>
    <div style="display: flex;">
        <a href="/blog-january-2025/img/blog/discord-login-1-december-2024.png"><img src="/blog-january-2025/img/blog/discord-login-1-december-2024.png"
            alt="Discord login screen in Servo, showing form input and a QR code that never finishes loading"></a>
        <a href="/blog-january-2025/img/blog/discord-login-2-december-2024.png"><img src="/blog-january-2025/img/blog/discord-login-2-december-2024.png"
            alt="Discord loading screen in Servo, after logging in"></a>
    </div>
    <a href="/blog-january-2025/img/blog/discord-small-december-2024.png"><img src="/blog-january-2025/img/blog/discord-small-december-2024.png"
        alt="Discord channel screen in Servo, showing a few of Diffie’s messages and attachments"></a>
</figure>
<p>We now support <strong>console.trace()</strong> (<a href="https://github.com/simonwuelker">@simonwuelker</a>, <a href="https://github.com/servo/servo/pull/34629">#34629</a>), <strong>PointerEvent</strong> (<a href="https://github.com/wusyong">@wusyong</a>, <a href="https://github.com/servo/servo/pull/34437">#34437</a>), and the <strong>clonable</strong> property on <strong>ShadowRoot</strong> (<a href="https://github.com/simonwuelker">@simonwuelker</a>, <a href="https://github.com/servo/servo/pull/34514">#34514</a>).
Shadow DOM support continues to improve (<a href="https://github.com/jdm">@jdm</a>, <a href="https://github.com/servo/servo/pull/34503">#34503</a>), including very basic <strong>Shadow DOM layout</strong> (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/34701">#34701</a>) when enabled via <code>--pref dom.shadowdom.enabled</code>.</p>
<p><code>script</code> underwent (and continues to undergo) major rework towards being <strong>more reliable</strong> and <strong>faster to build</strong>.
We’ve landed better <strong>synchronisation for DOM tree mutations</strong> (<a href="https://github.com/jdm">@jdm</a>, <a href="https://github.com/servo/servo/pull/34505">#34505</a>) and continued work on <strong>splitting up the <code>script</code> crate</strong> (<a href="https://github.com/jdm">@jdm</a>, <a href="https://github.com/servo/servo/pull/34366">#34366</a>).
We’ve moved our <strong>ReadableStream</strong> support into Servo, eliminating the maintenance burden of a downstream SpiderMonkey patch (<a href="https://github.com/gterzian">@gterzian</a>, <a href="https://github.com/wusyong">@wusyong</a>, <a href="https://github.com/Taym95">@Taym95</a>, <a href="https://github.com/servo/servo/pull/34064">#34064</a>, <a href="https://github.com/servo/servo/pull/34675">#34675</a>).</p>
<p>The web platform guarantees that same-origin frames and their parents can <strong>synchronously observe resizes</strong> and their effects.
Many tests rely on this, and not doing this correctly made Servo’s test results much flakier than they could otherwise be.
We’ve made very good progress towards fixing this (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/34643">#34643</a>, <a href="https://github.com/servo/servo/pull/34656">#34656</a>, <a href="https://github.com/servo/servo/pull/34702">#34702</a>, <a href="https://github.com/servo/servo/pull/34609">#34609</a>), with correct resizing in all cases except when a same-origin frame is in another script thread, which is rare.</p>
<p>We now support enough of <strong>XPath</strong> to get <a href="https://htmx.org">htmx</a> working (<a href="https://github.com/vlindhol">@vlindhol</a>, <a href="https://github.com/servo/servo/pull/34463">#34463</a>), when enabled via <code>--pref dom.xpath.enabled</code>.</p>
<figure>
    <a href="/blog-january-2025/img/blog/htmx-december-2024.png"><img src="/blog-january-2025/img/blog/htmx-december-2024.png"
        alt="htmx home page in Servo, with the hero banner thing now working (it relies on XPath)"></a>
</figure>
<p>Servo’s performance continues to improve, with <strong>layout caching for flex columns</strong> delivering up to 12x speedup (<a href="https://github.com/Loirooriol">@Loirooriol</a>, <a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/34461">#34461</a>), many <strong>unnecessary reflows now eliminated</strong> (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/34558">#34558</a>, <a href="https://github.com/servo/servo/pull/34599">#34599</a>, <a href="https://github.com/servo/servo/pull/34576">#34576</a>, <a href="https://github.com/servo/servo/pull/34645">#34645</a>), <strong>reduced memory usage</strong> (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/Loirooriol">@Loirooriol</a>, <a href="https://github.com/servo/servo/pull/34563">#34563</a>, <a href="https://github.com/servo/servo/pull/34666">#34666</a>), faster rendering for pages with animations (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/34489">#34489</a>), and timers now operating without IPC (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/34581">#34581</a>).</p>
<p><strong>servoshell nightlies are up to 20% smaller</strong> (<a href="https://github.com/atbrakhi">@atbrakhi</a>, <a href="https://github.com/servo/servo/pull/34340">#34340</a>), <strong>WebGPU is now optional</strong> at build time (<a href="https://github.com/atbrakhi">@atbrakhi</a>, <a href="https://github.com/servo/servo/pull/34444">#34444</a>), and <code>--features tracing</code> no longer enables <code>--features layout-2013</code> (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/34515">#34515</a>) for further binary size savings.
You can also <strong>limit the size of</strong> several of Servo’s <strong>thread pools</strong> with <code>--pref threadpools.fallback_worker_num</code> and others (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/34478">#34478</a>), which is especially useful on machines with many CPU cores.</p>
<p>We’ve started laying the groundwork for full <strong>incremental layout</strong> in our new layout engine, starting with a general layout caching mechanism (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/Loirooriol">@Loirooriol</a>, <a href="https://github.com/servo/servo/pull/34507">#34507</a>, <a href="https://github.com/servo/servo/pull/34513">#34513</a>, <a href="https://github.com/servo/servo/pull/34530">#34530</a>, <a href="https://github.com/servo/servo/pull/34586">#34586</a>).
This was lost in the switch to our new layout engine, and without it, every time a page changes, we have to rerun layout from scratch.
As you can imagine, this is very, very expensive, and incremental layout is critical for performance on today’s highly dynamic web.</p>
<aside class=_note>
<p>We’ve mentioned layout caching a few times, including in past monthly updates, but most of the caching we’ve landed so far has been to save time <em>within</em> a single reflow.
Incremental layout requires layout caching that <em>persists</em> across reflows, and algorithms to determine when to invalidate those cached results.</p>
</aside>
<h2 id="donations" tabindex="-1">Donations <a class="header-anchor" href="#donations">
        <span class="icon hashlink"><i class="fas fa-link"></i></span>
      </a></h2>
<p>Thanks again for your generous support!
We are now receiving <strong>4329 USD/month</strong> (+0.8% over November) in recurring donations.
With this money, we’ve been able to cover our web hosting and <a href="https://ci0.servo.org">self-hosted CI runners</a> for Windows, Linux, and now macOS builds (<a href="https://github.com/delan">@delan</a>, <a href="https://github.com/servo/servo/pull/34868">#34868</a>), <strong>halving <code>mach try</code> build times</strong> from over an hour to under 30 minutes!
Next month, we’ll be <a href="https://github.com/servo/project/issues/123">expanding our CI capacity further</a>, all made possible thanks to your help.</p>
<p>Servo is also on <a href="https://thanks.dev">thanks.dev</a>, and already <strong>sixteen GitHub users</strong> that depend on Servo are sponsoring us there.
If you use Servo libraries like <a href="https://crates.io/crates/url/reverse_dependencies">url</a>, <a href="https://crates.io/crates/html5ever/reverse_dependencies">html5ever</a>, <a href="https://crates.io/crates/selectors/reverse_dependencies">selectors</a>, or <a href="https://crates.io/crates/cssparser/reverse_dependencies">cssparser</a>, signing up for <a href="https://thanks.dev">thanks.dev</a> could be a good way for you (or your employer) to give back to the community.</p>
<figure class="_fig" style="width: 100%; margin: 1em 0;"><div class="_flex" style="height: calc(1lh + 3em); flex-flow: column nowrap; text-align: left;">
    <div style="position: relative; text-align: right;">
        <div style="position: absolute; margin-left: calc(100% * 4329 / 10000); padding-left: 0.5em;"><strong>4329</strong> USD/month</div>
        <div style="position: absolute; margin-left: calc(100% * 4329 / 10000); height: calc(1lh + 1.5em); border-left: 1px solid;"></div>
        <div style="position: absolute; margin-left: calc(100% - 0.5em); height: calc(1lh + 1.5em); border-left: 1px solid;"></div>
        <div style="padding-right: 1em;"><strong>10000</strong><!-- USD/month --></div>
    </div>
    <progress value="4329" max="10000" style="transform: scale(3); transform-origin: top left; width: calc(100% / 3);"></progress>
</div></figure>
<p>As always, use of these funds will be decided transparently in the Technical Steering Committee.
For more details, head to our <a href="/blog-january-2025/sponsorship/">Sponsorship page</a>.</p>
<style>
    /* guaranteed minimum width for first paragraph after a float */
    ._floatmin {
        display: block;
        width: 13em;
        overflow: hidden;
    }
    ._clear {
        clear: both;
    }
    ._clearl {
        clear: left;
    }
    ._clearr {
        clear: right;
    }
    ._none {
        display: none;
    }
    ._fig:not(#specificity) {
        width: 33em;
        max-width: 100%;
        margin: 1em auto;
    }
    ._fig > ._flex,
    ._figl > ._flex,
    ._figr > ._flex {
        display: flex;
    }
    ._fig table {
        text-align: initial;
    }
    ._fig figcaption._notes {
        text-align: left;
        width: max-content;
        max-width: 100%;
    }
    ._figl:not(#specificity),
    ._figr:not(#specificity) {
        margin: 0 1em 1em;
    }
    ._figl {
        float: left;
        max-width: 100%;
    }
    ._figr {
        float: right;
        max-width: 100%;
    }
    ._figl > figcaption,
    ._figr > figcaption,
    ._figl > iframe,
    ._figr > iframe,
    ._figl > video,
    ._figr > video,
    ._figl > a > img,
    ._figr > a > img,
    ._figl > ._flex,
    ._figr > ._flex {
        width: 21em;
        max-width: 100%;
    }

    .content {
        container-type: inline-size;
    }
    ._paired_figure {
        margin: 1em 0;
    }
    @container (min-width: 55em) {
        ._paired_figure {
            display: grid;
            grid-template-columns: auto 33em;
            column-gap: 2em;
            row-gap: 1em;
        }
        ._paired_figure > ._text_before,
        ._paired_figure > ._text_after {
            flex: 1 1 20em;
            grid-column: 1 / 2;
        }
        ._paired_figure > figure:not(#specificity) {
            flex: 0 1 33em;
            grid-row: 1 / 3;
            grid-column: 2 / 3;
            margin: 0;
        }

        ._text_after {
            grid-column: 1 / 3;
        }
    }

    ._runin {
        margin-bottom: 1em;
    }
    ._runin > p,
    ._runin > h2 {
        display: inline;
    }
    ._correction {
        max-width: 33em;
        margin: 1em auto;
        border-bottom: 1px solid;
        padding-bottom: 1em;
    }
    ._note {
        margin: 1em 1em;
        border-left: 1px solid;
        padding-left: 1em;
        opacity: 0.75;
    }
</style>

  <div>
    <a href="/blog-january-2025/blog/">Back</a>
  </div>
</div>



          </div>
    </main>
    <div class="contact" aria-label="Contact information">
    <div class="container">
        <div class="inner-container two-column">
            <div class="column">
                <h2>Contact</h2>
            </div>
            <div class="column">
                <ul>
                    <li><a class="footer-link" href="https://servo.zulipchat.com/">Zulip chat</a></li>
                    <li><a class="footer-link" href="https://github.com/servo/servo/discussions">GitHub discussions</a></li>
                    <li><a class="footer-link" href="mailto:info@servo.org">Email: info@servo.org</a></li>
                    <li><a class="footer-link" href="https://floss.social/@servo">Mastodon</a></li>
                    <li><a class="footer-link" href="https://bsky.app/profile/servo.org">Bluesky</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
    <footer>
      <div class="footer">
  <div class="container">
    <div class="two-column inner-container">
      <div class="column">
        <div class="logo"><a href="https://linuxfoundation.eu"><img src="/blog-january-2025/img/lf-europe-logo.png" alt="Linux Foundation Europe logo" width="250"></a></div>
        <p>&copy; 2025 The Servo Project Developers</p>
        <p>Copyright &copy; Servo is a project of <a class="footer-link" href="https://linuxfoundation.eu/">Linux Foundation Europe</a>.</p>
        <p>For website terms of use, trademark policy and other project policies please see <a class="footer-link" href="https://lfprojects.org">https://lfprojects.org</a>.</p>
      </div>
      <div class="column code-of-conduct">
        <a class="footer-link" href="/blog-january-2025/coc/">Code of Conduct</a>
      </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
  $(() => {
    const burger = $(".navbar-burger");
    const menu = $(".navbar-menu");
    burger.click(() => {
      [burger, menu].forEach((el) => el.toggleClass('is-active'));
    });
  });
</script>

    </footer>
  </body>
</html>
